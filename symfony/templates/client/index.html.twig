{% extends 'base.html.twig' %}

{% block title %}Edit Client{% endblock %}

{% block body %}
<h1>Клієнти</h1>

<form method="get">
    <div>
        <label>Ім’я:</label>
        <input type="text" name="name" value="{{ app.request.get('name') }}">
    </div>
    <div>
        <label>Email:</label>
        <input type="text" name="email" value="{{ app.request.get('email') }}">
    </div>
    <div>
        <label>Телефон:</label>
        <input type="text" name="phone" value="{{ app.request.get('phone') }}">
    </div>
    <div>
        <label>На сторінці:</label>
        <select name="itemsPerPage">
            {% for option in [5, 10, 20, 50] %}
                <option value="{{ option }}" {% if itemsPerPage == option %}selected{% endif %}>{{ option }}</option>
            {% endfor %}
        </select>
    </div>
    <button type="submit">Застосувати фільтри</button>
</form>

<table border="1" cellspacing="0" cellpadding="5">
    <thead>
        <tr>
            <th>ID</th>
            <th>Ім’я</th>
            <th>Email</th>
            <th>Телефон</th>
            <th>Дії</th>
        </tr>
    </thead>
    <tbody>
        {% for client in clients %}
            <tr>
                <td>{{ client.id }}</td>
                <td>{{ client.name }}</td>
                <td>{{ client.email }}</td>
                <td>{{ client.phone }}</td>
                <td>
                    <a href="{{ path('app_client_show', {'id': client.id}) }}">show</a>
                    <a href="{{ path('app_client_edit', {'id': client.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="3">Нічого не знайдено</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

{# Пагінація #}
<div class="pagination">
    {% if currentPage > 1 %}
        <a href="?page={{ currentPage - 1 }}&itemsPerPage={{ itemsPerPage }}{% if app.request.query.get('name') %}&name={{ app.request.query.get('name') }}{% endif %}{% if app.request.query.get('email') %}&email={{ app.request.query.get('email') }}{% endif %}{% if app.request.query.get('phone') %}&phone={{ app.request.query.get('phone') }}{% endif %}">&laquo; Попередня</a>
    {% endif %}

    {% for page in 1..totalPages %}
        {% if page == currentPage %}
            <span class="current">{{ page }}</span>
        {% else %}
            <a href="?page={{ page }}&itemsPerPage={{ itemsPerPage }}{% if app.request.query.get('name') %}&name={{ app.request.query.get('name') }}{% endif %}{% if app.request.query.get('email') %}&email={{ app.request.query.get('email') }}{% endif %}{% if app.request.query.get('phone') %}&phone={{ app.request.query.get('phone') }}{% endif %}">{{ page }}</a>
        {% endif %}
    {% endfor %}

    {% if currentPage < totalPages %}
        <a href="?page={{ currentPage + 1 }}&itemsPerPage={{ itemsPerPage }}{% if app.request.query.get('name') %}&name={{ app.request.query.get('name') }}{% endif %}{% if app.request.query.get('email') %}&email={{ app.request.query.get('email') }}{% endif %}{% if app.request.query.get('phone') %}&phone={{ app.request.query.get('phone') }}{% endif %}">Наступна &raquo;</a>
    {% endif %}
</div>
{% endblock %}